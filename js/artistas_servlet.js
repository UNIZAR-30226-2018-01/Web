$(document).ready(function(){var t,a=window.location.href,r=new URL(a).searchParams.get("pagina");document.title="Artistas",$("#form_mostrar_artistas").submit(function(a){a.preventDefault();var e=$(this).attr("action"),o=$(this).serialize(),n=$(this).attr("method");$.ajax({url:e,type:n,data:o}).done(function(a){var e=JSON.parse(a);if(null!=e.error)e.error.indexOf("Usuario no logeado en el servidor")>=0&&(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html");else{var o=JSON.stringify(a);sessionStorage.setItem("lista_artistas",o);var n=e.artistas;for(r=null==r?1:parseInt(r),t=20*(r-1),i=t;i<20+t&&i<n.length;i++){var s=n[i].nombreArtista,l=n[i].ruta_imagen,m=l.indexOf("/ps"),u='<li id="barraopciones"> <div class="cancioninf"><a href="artista.html?artista='+s+'" id="enlacecancion"><div class="imagen"><img src="'+(".."+l.substr(m))+'" alt="Imagen cancion" onerror="this.src=\'img/Unknown_Artist.png\'"></div><div class="nombrecancion">'+s+"</div></a></div></li>";$("#lista_artistas").append(u)}if(20+t<n.length){var d='<br><br><form action="artistas.html"><button type="submit" id="boton_mostrar_mas" class="aumentar">Mostrar más</button><input type="hidden" name="pagina" value="'+(r+1)+'"/></form>';$(".informacion").append(d)}}}).fail(function(t){alert("Error interno. Inténtelo más tarde.")})}),$("#form_mostrar_artistas").submit(),$("#form_buscar_artista").submit(function(t){t.preventDefault();var a=document.getElementById("form_buscar_artista").elements[0].value,r=$.trim(a);if(document.getElementById("search_artista").value=r,""==r)return!1;var i=$(this).attr("action"),e=$(this).serialize(),o=$(this).attr("method");$.ajax({url:i,type:o,data:e}).done(function(t){var a=JSON.parse(t),i=JSON.stringify(t);null!=a.error?a.error.indexOf("Usuario no logeado en el servidor")>=0?(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html"):a.error.indexOf("artista cuyo nombre sea o empiece")>=0?(sessionStorage.setItem("lista_usuarios",lista_usuarios),window.location="busqueda_artistas.html?busqueda_artista="+r+"&pagina=1"):alert("Error. Inténtelo más tarde."):(sessionStorage.setItem("lista_artistas",i),window.location="busqueda_artistas.html?busqueda_artista="+r+"&pagina=1")}).fail(function(t){alert("Error interno. Inténtelo más tarde.")})})});

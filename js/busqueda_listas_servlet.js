$(document).ready(function(){var a=window.location.href,t=new URL(a),e=t.searchParams.get("pagina");null==e&&(e=1);var r=t.searchParams.get("busqueda_lista");null==r&&(window.location="home.html"),document.title="Búsqueda listas: "+r,$("#texto_nombre_busqueda").append('"'+r+'"');var s=JSON.parse(JSON.parse(sessionStorage.getItem("lista_listas"))).busquedaListas;if(null!=s){var o=5*(e-1),n=1,l=[];for(j in s)"Favoritos"!=s[j].nombre&&l.push(s[j]);for(s=l,i=o;i<5+o&&i<s.length;i++){var u=s[i].nombre,d=s[i].nombreUsuario;if("Favoritos"!=u){var m='<div class="cancioninf"><ul><li id="barraopciones"><a href="lista.html?lista='+u+"&autor="+d+'" id="enlacecancion"><div class="imagen"><img src="img/listaicono.png" alt="Imagen lista"></div></a></li><li id="barraopciones"><a href="lista.html?lista='+u+"&autor="+d+'"><div class="nombrecancion">'+u+'</div><div class="nombreautor">Autor: '+d+"</div></a></li>",c='<li id="barraopciones"><form class="form_reproducir_lista" method="post" action="/ps/VerLista"><div class="simb_repr_play"><input type="image" src="img/play.png" alt="Reproducir lista" title="Reproducir lista"><input type="hidden" name="nombreLista" value="'+u+'"/><input type="hidden" name="nombreCreadorLista" value="'+d+'"/></div></form></li>';$(".informacion").append(m+c+"</ul></div>"),n=0}}if(1==n)$("#titulopagina").after('<h2 id="sin_resul">No hay resultados.</h2>');else if(5+o<s.length){var p='<br><br><form action="busqueda_listas.html"><button type="submit" id="boton_mostrar_mas" class="aumentar">Mostrar más</button><input type="hidden" name="busqueda_lista" value="'+r+'"/><input type="hidden" name="pagina" value="'+(parseInt(e)+1)+'"/></form>';$(".informacion").append(p)}form_repr_lista()}else $("#titulopagina").after('<h2 id="sin_resul">No hay resultados.</h2>');$("#form_buscar_lista").submit(function(a){a.preventDefault();var i=document.getElementById("form_buscar_lista").elements[0].value,t=$.trim(i);if(document.getElementById("search_lista").value=t,""==t)return!1;var e=$(this).attr("action"),r=$(this).serialize(),s=$(this).attr("method");$.ajax({url:e,type:s,data:r}).done(function(a){var i=JSON.parse(a),e=JSON.stringify(a);null!=i.error?i.error.indexOf("Usuario no logeado en el servidor")>=0?(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html"):i.error.indexOf("lista cuyo nombre coincida")>=0?(sessionStorage.setItem("lista_listas",e),window.location="busqueda_listas.html?busqueda_lista="+t+"&pagina=1"):alert("Error. Inténtelo más tarde."):(sessionStorage.setItem("lista_listas",e),window.location="busqueda_listas.html?busqueda_lista="+t+"&pagina=1")}).fail(function(a){alert("Error interno. Inténtelo más tarde.")})})});

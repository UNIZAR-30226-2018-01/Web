$(document).ready(function(){var a=window.location.href,t=new URL(a),e=t.searchParams.get("pagina");null==e&&(e=1);var r=t.searchParams.get("busqueda_artista");null==r&&(window.location="home.html"),document.title="Búsqueda artistas: "+r,$("#texto_nombre_busqueda").append('"'+r+'"');var s=JSON.parse(JSON.parse(sessionStorage.getItem("lista_artistas"))).artistas;if(null!=s){var n=20*(e-1),o=1;for(i=n;i<20+n&&i<s.length;i++){var l=s[i].nombreArtista,u=s[i].ruta_imagen,d=u.indexOf("/ps"),m='<li id="barraopciones"><div class="cancioninf"><a href="artista.html?artista='+l+'" id="enlacecancion"><div class="imagen"><img src="'+(".."+u.substr(d))+'" alt="Imagen cancion" onerror="this.src=\'img/Unknown_Artist.png\'"></div><div class="nombrecancion">'+l+"</div></a></div></li>";$("#lista_artistas").append(m),o=0}if(1==o)$("#titulopagina").after('<h2 id="sin_resul">No hay resultados.</h2>');else if(20+n<s.length){var c='<br><br><form action="busqueda_artistas.html"><button type="submit" id="boton_mostrar_mas" class="aumentar">Mostrar más</button><input type="hidden" name="busqueda_artista" value="'+r+'"/><input type="hidden" name="pagina" value="'+(e+1)+'"/></form>';$(".informacion").append(c)}}else $("#titulopagina").after('<h2 id="sin_resul">No hay resultados.</h2>');$("#form_buscar_artista").submit(function(a){a.preventDefault();var t=document.getElementById("form_buscar_artista").elements[0].value,i=$.trim(t);if(document.getElementById("search_artista").value=i,""==i)return!1;var e=$(this).attr("action"),r=$(this).serialize(),s=$(this).attr("method");$.ajax({url:e,type:s,data:r}).done(function(a){var t=JSON.parse(a),e=JSON.stringify(a);null!=t.error?t.error.indexOf("Usuario no logeado en el servidor")>=0?(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html"):t.error.indexOf("artista cuyo nombre sea o empiece")>=0?(sessionStorage.setItem("lista_artistas",e),window.location="busqueda_artistas.html?busqueda_artista="+i+"&pagina=1"):alert("Error. Inténtelo más tarde."):(sessionStorage.setItem("lista_artistas",e),window.location="busqueda_artistas.html?busqueda_artista="+i+"&pagina=1")}).fail(function(a){alert("Error interno. Inténtelo más tarde.")})})});

function form_borrar_cancion(){$(".form_borrar_cancion_lista").submit(function(i){i.preventDefault();var a=$(this).attr("action"),r=$(this).serialize(),n=$(this).attr("method");$.ajax({url:a,type:n,data:r}).done(function(i){var a=JSON.parse(i);null!=a.error?a.error.indexOf("Usuario no logeado en el servidor")>=0?(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html"):alert("Error interno. Inténtelo más tarde."):($("#resultado_seguir").text("Canción eliminada correctamente."),$("#result_seguir").attr("src","img/exito.png")),$(".button2").click()}).fail(function(i){alert("Error interno. Inténtelo más tarde.")})})}$(document).ready(function(){document.title="Favoritos",$("#form_mostrar_lista").submit(function(a){a.preventDefault();var r=leerCookie("login");document.getElementById("form_mostrar_lista").elements[0].value="Favoritos",document.getElementById("form_mostrar_lista").elements[1].value=r;var n=$(this).attr("action"),e=$(this).serialize(),o=$(this).attr("method");$.ajax({url:n,type:o,data:e}).done(function(a){var r=JSON.parse(a);if(null!=r.error)r.error.indexOf("Usuario no logeado en el servidor")>=0&&(borrarCookie("login"),borrarCookie("idSesion"),window.location="inicio.html");else if(null!=r.NoHayCanciones)$("#titulopagina").after('<h2 id="sin_resul">No hay canciones.</h2>');else{var n=window.location.href,e=new URL(n).searchParams.get("pagina"),o=r.canciones,t=JSON.stringify(o);sessionStorage.setItem("listaAux",t),e=null==e?1:parseInt(e);for(inicio=5*(e-1),i=inicio;i<5+inicio&&i<o.length;i++){var l=o[i].tituloCancion,s=o[i].nombreArtista,c=o[i].genero,m=o[i].nombreAlbum,d=o[i].ruta,u=d.indexOf("/ps"),p=".."+d.substr(u),f=o[i].uploader,b=o[i].ruta_imagen,g=b.indexOf("/ps"),v=".."+b.substr(g);null==c&&(c=""),null==m&&(m="");var h='<div class="cancioninf"><ul><li id="barraopciones"><a href="cancion.html?nombre='+l+"&artista="+s+"&album="+m+"&genero="+c+"&uploader="+f+"&ruta="+p+"&ruta_imagen="+v+'" id="enlacecancion"><div class="imagen"><img src="'+v+'" alt="Imagen cancion" onClick="setIndiceAndPlay('+i+',1)" onerror="this.src=\'img/Unknown_Music.png\'"></div></a></li>',_='<li id="barraopciones"><a href="cancion.html?nombre='+l+"&artista="+s+"&album="+m+"&genero="+c+"&uploader="+f+"&ruta="+p+"&ruta_imagen="+v+'" id="enlacecancion"><div class="nombrecancion" onClick="setIndiceAndPlay('+i+',1)">'+l+"</div></a>",y='<a href="artista.html?artista='+s+'"><div class="nombreautor">Artista: '+s+"</div></a>",C='<a href="estilo.html?estilo='+c+'"><div class="nombregenero">Género: '+c+"</div></a>",I='</li><li id="barraopciones"><div class="simb_repr_play"><input type="image" src="img/play.png" alt="Reproducir cancion" title="Reproducir canción" onClick="setIndiceAndPlay('+i+',0);return false;"></div></li>',k='<form class="form_borrar_cancion_lista" method="post" action="/ps/QuitarCancionDeLista"><li id="barraopciones"><div class="simb_repr_elim"><input type="hidden" name="ruta" value="'+d+'"/><input type="hidden" name="nombreLista" value="Favoritos"/><input type="image" src="img/eliminar.png" alt="Eliminar cancion de lista" title="Eliminar canción de lista"></div></li></form>';""==c&&(C=""),$(".informacion").append(h+_+y+C+I+k+"</ul></div>")}if(5+inicio<o.length){var x='<br><br><form action="favoritos.html"><button type="submit" id="boton_mostrar_mas" class="aumentar">Mostrar más</button><input type="hidden" name="pagina" value="'+(e+1)+'"/></form>';$(".informacion").append(x)}}form_borrar_cancion()}).fail(function(i){alert("Error interno. Inténtelo más tarde.")})}),$("#form_mostrar_lista").submit()});
